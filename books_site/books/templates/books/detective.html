{% extends 'base.html' %}

{% load static %}
{% block content %}

<form action="{% url "detective" %}" method="get">
    <div class = 'div_select'><select name="sort" id="sort" class="form-select" aria-label="Пример выбора по умолчанию">
        <option value="-count_buy">По популярности</option>
        <option value="price">Дешевле</option>
        <option value="-price">Дороже</option>
    </select></div>
    <div class = 'input_div'><input type="submit" class="btn btn-primary" value="Сортировать"></div>
</form>
<div style = 'clear: both;'></div>

<!--{% for i in books %}
  <div class="card">
    
    <div class = 'cart_img'>{% if i.photo %}
        <img class="card-img-top" src="{{i.photo.url}}">
    {% endif %}</div>
    <div class="card-body">
      <h5 class="card-title">{{ i.title }}</h5>
      <p class="card-text">{{ i.description|truncatewords:20 }}</p>
      <p class="card-text">{{ i.price }}</p>
      <a href="#" class="btn btn-primary">Перейти куда-нибудь</a>
      
    </div>
  </div>
  {% endfor %}-->
  
  {% for i in page_obj %}
  
  <div class="card mb-3" style="width: 540px; height: 250px ">
    <div class="row g-0">
      <div class="col-md-4"  >
        {% if i.photo %}
        <a href="{{ i.get_absolute_url }}"><img class="img-fluid rounded-start" src="{{i.photo.url}}"></a>
        {% endif %}
      </div>
      <div class="col-md-8" id="flex_tab" >
        <div class="card-body">
          <a class="a_href_title" href="{{ i.get_absolute_url }}"><h5 class="card-title">{{ i.title|truncatechars:29 }}</h5></a>
          <p class="card-text">{{ i.author }}</p>
          <h5 class="card-subtitle" id="price_product_cart" >{{ i.price }} ₽</h5>
          <div>
          <div class="form_book_buy2">
            <form action="{% url "cart_add" i.slug %}" method="post">
              <div class="number">
                <button class="number-minus" type="button" onclick="this.nextElementSibling.stepDown(); this.nextElementSibling.onchange();">-</button>
                <input type="number" name="quantity" min="1" value="1" >
                <button class="number-plus" type="button" onclick="this.previousElementSibling.stepUp(); this.previousElementSibling.onchange();">+</button>
              </div>
              <!--<div class="producr_quantity">{{ cart_product_form.quantity }}</div>-->
              {% csrf_token %}
              <div class="btn_card_price" id="btn_card_price"><input class="btn btn-primary" id="btn_card_price" type="submit" value="Заказать"></div>
          </form>
          </div>
        </div>
        </div>
        
      </div>
    </div>
  </div>
  {% endfor %}

  
    <!--{% for i in books %}
        {{ i.title }}
        {% if i.photo %}
            <p><img class="photo" src="{{i.photo.url}}"></p>
        {% endif %}

        {{ i.price }}

    {% endfor %}-->

{% endblock %}